<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>双重设备配置功能验证</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      margin: 0;
      padding: 20px;
      background: #f0f2f5;
    }
    .test-container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 24px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .test-header {
      background: linear-gradient(135deg, #1890ff 0%, #40a9ff 100%);
      color: white;
      padding: 24px;
      border-radius: 12px;
      margin-bottom: 28px;
      text-align: center;
    }
    .config-comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-bottom: 32px;
    }
    .config-type {
      padding: 20px;
      border-radius: 12px;
      border: 2px solid;
    }
    .outer-config {
      background: linear-gradient(135deg, #e6f7ff 0%, #f0f9ff 100%);
      border-color: #91d5ff;
    }
    .inner-config {
      background: linear-gradient(135deg, #f6ffed 0%, #f9fff0 100%);
      border-color: #b7eb8f;
    }
    .config-type h3 {
      margin: 0 0 16px 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .test-step {
      background: #fafafa;
      border: 1px solid #e8e8e8;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
      border-left: 4px solid #1890ff;
    }
    .test-step h4 {
      margin: 0 0 12px 0;
      color: #1890ff;
      font-weight: 600;
    }
    .expected-behavior {
      background: #e6f7ff;
      border: 1px solid #91d5ff;
      border-radius: 6px;
      padding: 12px;
      margin: 8px 0;
    }
    .expected-behavior h5 {
      margin: 0 0 8px 0;
      color: #1890ff;
      font-size: 14px;
    }
    .nav-link {
      display: inline-block;
      padding: 12px 24px;
      background: #1890ff;
      color: white;
      text-decoration: none;
      border-radius: 8px;
      margin-right: 12px;
      margin-bottom: 12px;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    .nav-link:hover {
      background: #40a9ff;
      transform: translateY(-2px);
    }
    .key-point {
      background: #fff7e6;
      border: 1px solid #ffd591;
      padding: 16px;
      border-radius: 8px;
      margin: 16px 0;
    }
    .key-point::before {
      content: "🔑 ";
      font-weight: bold;
      color: #fa8c16;
    }
    .icon {
      display: inline-block;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      color: white;
      text-align: center;
      line-height: 20px;
      font-size: 12px;
      font-weight: bold;
    }
    .outer-icon {
      background: #1890ff;
    }
    .inner-icon {
      background: #52c41a;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <div class="test-header">
      <h1>🔄 双重设备配置功能验证</h1>
      <p>验证外面的统一设备配置选择器和里面的单个参数设备配置都能正常工作</p>
    </div>

    <div class="config-comparison">
      <div class="config-type outer-config">
        <h3><span class="icon outer-icon">外</span>外面的设备配置</h3>
        <ul style="margin: 0; font-size: 14px;">
          <li><strong>位置</strong>：添加方式下拉 → "设备配置"</li>
          <li><strong>功能</strong>：统一设备配置选择器</li>
          <li><strong>用途</strong>：一次性生成多个相关参数</li>
          <li><strong>优势</strong>：处理参数间的相关性，避免重复</li>
          <li><strong>界面</strong>：UnifiedDeviceConfigSelector 抽屉</li>
        </ul>
      </div>
      
      <div class="config-type inner-config">
        <h3><span class="icon inner-icon">内</span>里面的设备配置</h3>
        <ul style="margin: 0; font-size: 14px;">
          <li><strong>位置</strong>：参数详情 → "参数类型" → "设备配置"</li>
          <li><strong>功能</strong>：单个参数的设备配置</li>
          <li><strong>用途</strong>：为某个具体参数选择设备数据</li>
          <li><strong>优势</strong>：灵活配置单个参数的设备绑定</li>
          <li><strong>界面</strong>：DeviceMetricsSelector 组件</li>
        </ul>
      </div>
    </div>

    <div class="key-point">
      <strong>核心区别</strong>：外面的设备配置是"批量添加相关参数"，里面的设备配置是"编辑单个参数的类型"。两者都应该正常工作，互不冲突。
    </div>

    <div class="test-step">
      <h4>🧪 测试步骤1：验证外面的设备配置（统一选择器）</h4>
      <div class="expected-behavior">
        <h5>测试操作</h5>
        <ol style="margin: 8px 0 0 0; font-size: 14px;">
          <li>打开数据源系统测试页面</li>
          <li>在HTTP配置的"Headers"区域，点击"添加Header"下拉</li>
          <li>选择"设备配置"选项</li>
          <li><strong>验证：应该打开右侧抽屉，标题为"设备配置"</strong></li>
          <li>选择设备和参数类型，点击确认</li>
          <li><strong>验证：应该一次性添加多个相关参数</strong></li>
        </ol>
      </div>
    </div>

    <div class="test-step">
      <h4>🧪 测试步骤2：验证里面的设备配置（单个参数）</h4>
      <div class="expected-behavior">
        <h5>测试操作</h5>
        <ol style="margin: 8px 0 0 0; font-size: 14px;">
          <li>添加任意参数（手动输入或属性绑定都可以）</li>
          <li>点击该参数的"详情"按钮</li>
          <li>在参数详情中，点击"参数类型"下拉框</li>
          <li><strong>验证：应该显示3个选项：手动输入、组件属性绑定、设备配置</strong></li>
          <li>选择"设备配置"</li>
          <li><strong>验证：应该出现设备配置界面，可以为这个参数选择设备数据</strong></li>
        </ol>
      </div>
    </div>

    <div class="test-step">
      <h4>🧪 测试步骤3：验证两种配置的区别</h4>
      <div class="expected-behavior">
        <h5>对比验证</h5>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin: 12px 0;">
          <div style="background: #f0f9ff; padding: 12px; border-radius: 6px;">
            <strong style="color: #1890ff;">外面设备配置结果</strong>
            <ul style="margin: 8px 0 0 0; font-size: 13px;">
              <li>生成多个参数（如：device_id, metric_key等）</li>
              <li>参数间有关联关系</li>
              <li>统一管理，避免重复</li>
            </ul>
          </div>
          <div style="background: #f9fff0; padding: 12px; border-radius: 6px;">
            <strong style="color: #52c41a;">里面设备配置结果</strong>
            <ul style="margin: 8px 0 0 0; font-size: 13px;">
              <li>只影响当前这一个参数</li>
              <li>为该参数绑定设备数据</li>
              <li>灵活的单参数配置</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div style="background: #f8f8f8; border: 1px solid #d9d9d9; border-radius: 8px; padding: 20px; margin-top: 24px;">
      <h3>💡 使用场景建议</h3>
      
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 16px;">
        <div>
          <h4 style="color: #1890ff; margin: 0 0 12px 0;">🎯 外面设备配置适用场景</h4>
          <ul style="margin: 0; font-size: 14px;">
            <li>新建HTTP请求，需要设备相关参数</li>
            <li>批量添加设备ID、指标等相关参数</li>
            <li>确保参数间的一致性和关联性</li>
            <li>避免重复参数问题</li>
          </ul>
        </div>
        
        <div>
          <h4 style="color: #52c41a; margin: 0 0 12px 0;">🎯 里面设备配置适用场景</h4>
          <ul style="margin: 0; font-size: 14px;">
            <li>已有参数，需要修改为设备数据源</li>
            <li>单独配置某个特定参数的设备绑定</li>
            <li>灵活调整已有参数的数据来源</li>
            <li>精细化的参数配置需求</li>
          </ul>
        </div>
      </div>
    </div>

    <div style="text-align: center; margin-top: 32px; padding: 20px; background: #e6f7ff; border-radius: 8px;">
      <h3>🚀 开始验证双重设备配置功能！</h3>
      <p>确保外面和里面的设备配置都能正常工作，各司其职</p>
      <a href="http://localhost:5002/test/data-source-system" class="nav-link" target="_blank" style="font-size: 16px;">
        🔗 测试双重设备配置
      </a>
    </div>
  </div>
</body>
</html>