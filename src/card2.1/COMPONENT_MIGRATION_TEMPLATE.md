# 组件迁移指南模板

## 📋 组件基本信息

| 项目 | 内容 |
|------|------|
| **组件名称** | [组件中文名] ([组件英文ID]) |
| **组件类型** | [数据展示/交互控制/图表可视化] |
| **原始路径** | `/src/card/chart-card/[组件目录]/` |
| **目标路径** | `/src/card2.1/components/[组件目录]/` |
| **迁移状态** | [⏳ 待开始/🚧 进行中/✅ 已完成] |

## 🔌 API接口分析

### 使用的API接口

| API名称 | 用途 | 参数 | 触发条件 |
|---------|------|------|----------|
| [API名称] | [具体用途] | [参数列表] | [触发条件] |

### 代码片段分析
```typescript
// 原始代码位置和关键逻辑
// 从 chart-card 中提取的API使用代码
```

## 📊 数据源配置

| 属性 | 类型 | 描述 |
|------|------|------|
| **数据源类型** | `device/system/static` | 数据源类型 |
| **主要API** | `[API名称]` | 主要使用的API |
| **备选API** | `[API名称]` | 备选API（可选） |
| **轮询支持** | ✅/❌ | 是否需要轮询更新 |
| **控制组件** | ✅/❌ | 是否为控制组件 |

### 自动配置
```typescript
// 在 component-api-config.ts 中的配置
'[组件ID]': {
  apiType: '[主要API]',
  fallbackApiType: '[备选API]',
  dataSourceType: '[数据源类型]',
  requiresPolling: [true/false],
  isControlComponent: [true/false],
  supportedMetricsTypes: ['[支持的指标类型]']
}
```

## 🎛️ 表单配置

### 配置面板结构
- [✅/❌] **有配置表单** (`[组件名]Config.vue`)
- 📝 **主要配置项**:
  - [配置项1] ([字段名])
  - [配置项2] ([字段名])
  - [更多配置项...]

### 表单代码示例
```vue
<!-- [组件名]Config.vue -->
<template>
  <div class="config-form">
    <!-- 主要配置项 -->
  </div>
</template>
```

## 🌐 国际化配置

### 国际化Key列表

| Key | 中文 | 英文 | 用途 |
|-----|------|------|------|
| `[key名称]` | [中文翻译] | [英文翻译] | [使用场景] |

### 使用示例
```typescript
// 在代码中的使用
title: $t('[key名称]')
```

### 国际化文件位置
- `/src/locales/langs/zh-cn/[文件名].json`
- `/src/locales/langs/en-us/[文件名].json`

## 📋 功能需求描述

### 核心功能
1. **[功能1]**: [详细描述]
2. **[功能2]**: [详细描述]
3. **[更多功能]**: [详细描述]

### 数据流程
```
[数据源] → [处理步骤] → [最终输出]
    ↓
[具体的API调用流程和数据处理逻辑]
```

### 业务逻辑
- **[关键逻辑1]**: [具体说明]
- **[关键逻辑2]**: [具体说明]

## ✅ 迁移清单

### 待完成项目
- [ ] 组件基础结构迁移
- [ ] 数据源系统集成
- [ ] API配置自动化
- [ ] 配置面板实现
- [ ] 国际化支持
- [ ] 测试验证

### 关键改进点
1. **[改进点1]**: [具体说明]
2. **[改进点2]**: [具体说明]
3. **[更多改进]**: [具体说明]

## 🔧 技术细节

### 数据源集成
```typescript
// 新系统中的关键代码
```

### 组件定义
```typescript
// index.ts 中的组件定义
```

## 🚨 注意事项

1. **[重要提醒1]**: [具体说明]
2. **[重要提醒2]**: [具体说明]
3. **[兼容性考虑]**: [向后兼容性说明]

## 📖 使用示例

```vue
<!-- 在面板中的使用示例 -->
<[组件名]
  :properties="{ 
    // 属性配置
  }"
  :metadata="{
    dataSource: {
      // 数据源配置
    }
  }"
/>
```

---

## 📚 相关文档

- [组件API配置系统](../../components/visual-editor/core/component-api-config.ts)
- [数据源配置指南](../../components/visual-editor/settings/data-sources/README.md)
- [通用数据源管理器](../../components/visual-editor/core/universal-data-source-manager.ts)