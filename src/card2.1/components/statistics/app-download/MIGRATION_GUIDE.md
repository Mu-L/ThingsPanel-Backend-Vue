# 应用下载组件迁移指南

## 迁移概览

**组件名称**: 应用下载 (App Download)  
**原路径**: `src/card/builtin-card/app-download/`  
**新路径**: `src/card2.1/components/statistics/app-download/`  
**迁移日期**: 2025-09-08  
**兼容性**: 完全向后兼容，保持历史数据访问

## 组件功能特点

### 基本功能
- **应用下载展示**: 显示移动应用下载二维码
- **应用商店链接**: 提供 App Store 和 Google Play 下载入口
- **纯展示型组件**: 无数据交互，完全静态展示
- **国际化支持**: 文本内容支持多语言切换
- **主题适配**: 支持明暗主题自动切换

### 技术特点
- **自包含设计**: 无外部数据依赖，所有资源内置
- **无配置需求**: 无数据源配置，无组件参数配置
- **响应式布局**: 支持容器查询，适配不同尺寸
- **图片资源管理**: 内置二维码和应用商店徽章图片

## 迁移改进

### 架构优化
1. **组件结构规范化**: 遵循 Card2.1 标准组件架构
2. **主题系统集成**: 使用 CSS 变量实现主题切换
3. **代码标准化**: 严格遵循项目编码规范
4. **性能优化**: 静态资源优化和加载性能提升

### 样式改进
1. **主题变量**: 替换硬编码颜色，使用主题系统
2. **响应式设计**: 增强容器查询支持
3. **交互效果**: 优化按钮悬停和点击效果
4. **视觉一致性**: 与系统整体视觉风格保持一致

### 功能保持
- **完全兼容**: 保持原有所有功能特性
- **视觉一致**: 保持原有视觉设计和布局
- **交互保持**: 保持原有交互逻辑（点击事件等）
- **国际化**: 继续使用相同的国际化键值

## 配置说明

### 组件标识
- **类型**: `app-download`（保持不变，确保历史数据兼容）
- **名称**: 应用下载
- **分类**: `statistics` (统计类组件)
- **主分类**: 系统工具
- **子分类**: 应用下载

### 权限设置
- **权限级别**: 不限（所有用户可用）
- **访问控制**: 无特殊限制

### 尺寸规格
- **默认尺寸**: 300x250 像素
- **最小尺寸**: 200x200 像素
- **响应式**: 支持容器查询自适应

### 配置特性
- **数据源配置**: ❌ 不支持（按需求无数据源）
- **组件参数配置**: ❌ 不支持（按需求无组件配置）
- **样式配置**: ✅ 支持（通过基础配置面板）
- **交互配置**: ✅ 支持（通过交互配置面板）

## 使用方式

### 在 Visual Editor 中使用
1. 打开可视化编辑器
2. 从组件面板选择"统计类 > 应用下载"
3. 拖拽到画布进行布局
4. 通过基础配置调整尺寸和样式

### 编程方式使用
```vue
<script setup lang="ts">
import AppDownloadCard from '@/card2.1/components/statistics/app-download/AppDownloadCard.vue'
</script>

<template>
  <AppDownloadCard />
</template>
```

## 文件结构

```
src/card2.1/components/statistics/app-download/
├── index.ts                    # 组件定义文件
├── AppDownloadCard.vue         # Vue 组件实现
├── MIGRATION_GUIDE.md          # 迁移指南（本文档）
├── download_app.png            # 二维码图片
├── placeholder-app-store.png   # App Store 徽章
└── placeholder-google-play.png # Google Play 徽章
```

## 国际化键值

组件使用以下国际化键值：
- `card.appDownload.title` - 组件标题
- `card.appDownload.scanOrClick` - 说明文字

确保这些键值在语言文件中正确定义。

## 兼容性说明

### 向后兼容
- ✅ **历史数据**: 使用相同的组件类型标识符 `app-download`
- ✅ **配置格式**: 兼容原有配置数据结构
- ✅ **API接口**: 保持原有接口调用方式
- ✅ **功能特性**: 保持所有原有功能

### 版本信息
- **Card2.1 版本**: 2.1.0
- **原版本兼容**: builtin-card 系统
- **迁移状态**: 完成 ✅

## 测试验证

### 测试清单
- [ ] 组件正常加载和渲染
- [ ] 图片资源正确显示
- [ ] 国际化文本正确显示
- [ ] 主题切换正常工作
- [ ] 响应式布局适配正常
- [ ] 在 Visual Editor 中可正常添加
- [ ] 配置面板正确显示（无数据源配置，无组件配置）
- [ ] 历史数据兼容性验证

### 性能测试
- [ ] 组件加载时间
- [ ] 内存使用情况
- [ ] 图片加载性能
- [ ] 渲染性能

## 问题排查

### 常见问题
1. **组件不显示**: 检查图片资源路径是否正确
2. **样式异常**: 确认主题变量是否正确引用
3. **国际化失效**: 检查语言文件中的键值定义
4. **配置面板异常**: 确认组件已正确添加到无配置列表

### 调试方法
1. 检查浏览器开发者工具控制台
2. 验证组件注册状态
3. 确认资源文件加载情况
4. 检查主题变量生效状态

## 维护说明

### 未来更新
- 如需添加实际下载链接，修改点击事件处理函数
- 如需更新图片资源，替换对应 PNG 文件
- 如需添加配置选项，需要同步更新配置注册表

### 注意事项
- 保持组件类型标识符不变，确保历史兼容性
- 修改样式时使用主题变量，避免硬编码
- 添加新功能时考虑向后兼容性