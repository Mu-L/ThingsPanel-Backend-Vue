# Card2.1 测试组件说明

## 📋 概述

我已经为您创建了 3 个完整的测试组件，用于验证数据源配置系统的功能。这些组件涵盖了不同的数据源类型和配置场景。

## 🧩 已创建的测试组件

### 1. 简单数据展示 (SimpleDataDisplay)
- **组件ID**: `simple-data-display`
- **功能**: 展示单个JSON对象的数据
- **数据需求**: 1个对象类型数据源
- **适用场景**: 设备信息、用户资料、产品详情等

**支持的字段类型**:
- `id` (string): 唯一标识符
- `name` (string): 显示名称  
- `value` (number): 主要数值
- `status` (string): 状态信息
- `lastUpdate` (date): 最后更新时间

### 2. 时间序列图表 (TimeSeriesChart)
- **组件ID**: `time-series-chart`
- **功能**: 展示时间序列数据的趋势图表
- **数据需求**: 1个数组类型数据源
- **适用场景**: 温度趋势、访问量统计、性能监控等

**支持的字段类型**:
- `time` (string): 时间戳
- `value` (number): 数值
- `label` (string): 数据标签

### 3. 统计卡片 (StatisticsCard)  
- **组件ID**: `statistics-card`
- **功能**: 展示多数据源的汇总统计信息
- **数据需求**: 1-3个数据源（对象+数组+配置）
- **适用场景**: 仪表板概览、业务统计、系统监控等

**支持的数据源**:
1. **主要统计数据** (object): total, active, rate
2. **详细数据列表** (array): id, value, category, timestamp  
3. **配置参数** (object): displayMode, refreshInterval, thresholds

## 🚀 如何测试

### 步骤 1: 访问 Visual Editor
1. 浏览器打开 `http://localhost:5002`
2. 导航到 **Visual Editor** 测试页面
3. 或直接访问测试路由 `/test/editor-integration`

### 步骤 2: 添加测试组件
1. 在组件库中找到测试组件（分类：数据展示、图表、统计）
2. 将组件拖拽到画布上
3. 组件会显示"暂无数据"状态，这是正常的

### 步骤 3: 配置数据源
1. 选中组件，右侧会显示设置面板
2. 点击 **"数据配置"** 标签页
3. 会看到组件的数据需求声明
4. 点击 **"添加数据源"** 按钮

### 步骤 4: 配置 JSON 数据
根据不同组件类型，输入相应的测试数据：

#### 简单数据展示 - 测试数据：
```json
{
  "id": "sensor_001",
  "name": "温度传感器",
  "value": 25.6,
  "status": "online",
  "lastUpdate": "2024-01-01T12:00:00Z"
}
```

#### 时间序列图表 - 测试数据：
```json
[
  {"time": "2024-01-01T10:00:00Z", "value": 20.1, "label": "温度"},
  {"time": "2024-01-01T11:00:00Z", "value": 22.3, "label": "温度"},
  {"time": "2024-01-01T12:00:00Z", "value": 25.6, "label": "温度"},
  {"time": "2024-01-01T13:00:00Z", "value": 27.8, "label": "温度"},
  {"time": "2024-01-01T14:00:00Z", "value": 24.2, "label": "温度"}
]
```

#### 统计卡片 - 测试数据：

**数据源1 (主要统计)**:
```json
{
  "total": 1000,
  "active": 850,
  "rate": 85.5
}
```

**数据源2 (详细列表，可选)**:
```json
[
  {"id": "item_001", "value": 123.45, "category": "TypeA", "timestamp": "2024-01-01T10:00:00Z"},
  {"id": "item_002", "value": 234.56, "category": "TypeB", "timestamp": "2024-01-01T11:00:00Z"},
  {"id": "item_003", "value": 345.67, "category": "TypeA", "timestamp": "2024-01-01T12:00:00Z"}
]
```

### 步骤 5: 配置字段映射
1. 在 **"字段映射"** 标签页中配置字段映射
2. 设置源数据路径到目标字段的映射关系
3. 可以测试复杂路径如 `data[0].sensors[1].value`
4. 可以添加数据转换表达式如 `value * 100`

### 步骤 6: 预览和应用
1. 点击 **"预览结果"** 查看映射效果
2. 确认无误后点击 **"应用结果"**
3. 组件会立即显示配置的数据

## 🔧 高级功能测试

### 复杂路径映射测试
```json
{
  "devices": [
    {
      "sensors": [
        {"type": "temperature", "value": 25.6},
        {"type": "humidity", "value": 60.2}
      ]
    }
  ]
}
```

映射路径: `devices[0].sensors[1].value`

### 数据转换测试
- **转大写**: `value.toUpperCase()`
- **数值计算**: `value * 100`
- **日期格式化**: `new Date(value).toLocaleDateString()`

### 多数据源测试
为统计卡片组件配置多个数据源，测试数据源间的关联和汇总计算。

## 🐛 调试功能

每个组件都支持调试模式：
1. 在组件属性中启用 `showDebugInfo`
2. 会显示原始数据、处理后数据、配置信息等
3. 方便排查数据流和映射问题

## 📊 验证完整性

测试完成后，您应该能够验证：
- ✅ JSON数据源的编辑和验证
- ✅ 复杂路径的解析和映射  
- ✅ 数据转换表达式的执行
- ✅ 多数据源的管理和配置
- ✅ 实时预览和结果应用
- ✅ 配置的导入导出
- ✅ 国际化界面的支持
- ✅ 主题切换的适配

现在您就可以完整测试整个数据源配置系统了！🎉