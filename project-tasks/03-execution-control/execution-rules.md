# 执行规则说明

## 🎯 执行控制核心机制

确保每次只执行一个小任务，防止跑偏，保证任务完成质量。

## 📋 执行前检查清单

### 必须确认的信息
```markdown
□ 当前主线大任务是什么？（检查 current-main-objective.md）
□ 当前要执行的小任务是什么？（检查 current-subtask.md）
□ 小任务的具体边界是什么？（明确做什么、不做什么）
□ 小任务的验收标准是什么？（如何判断完成）
□ 预估执行时间是否在1-2小时内？
□ 是否有前置条件未满足？
```

### 环境检查
```markdown
□ 开发环境已准备就绪
□ 相关工具和依赖已安装
□ 代码仓库状态正常
□ 没有未提交的更改影响当前任务
```

## ⚡ 执行过程规范

### 开始执行时
1. **标记任务状态**：在 `current-subtask.md` 中标记为 `in_progress`
2. **记录开始时间**：记录实际开始时间
3. **设置专注模式**：关闭无关干扰，专注当前任务

### 执行中的行为规范
```markdown
✅ 允许的行为：
- 严格按照任务描述执行
- 遇到阻塞立即汇报
- 记录重要的技术决策
- 进行基本的代码质量保证

❌ 禁止的行为：
- 扩展任务范围（"顺便做一下"）
- 切换到其他任务
- 进行未计划的重构
- 修复发现的无关bug
- 优化无关的代码
```

### 执行中的时间管理
- **30分钟检查点**：每30分钟检查是否偏离任务目标
- **1小时进度汇报**：执行超过1小时时汇报进度
- **接近2小时预警**：接近2小时时评估是否需要任务拆解

## 📊 进度跟踪和汇报

### 进度汇报格式
```markdown
## 任务执行进度汇报
**任务名称**：[当前执行的小任务名称]
**执行时间**：[已执行时间] / [预估总时间]
**完成百分比**：[X%]

### 已完成工作
- [具体完成的工作项1]
- [具体完成的工作项2]

### 正在进行的工作
- [当前正在处理的工作项]

### 遇到的问题
- [问题1：具体描述和影响]
- [问题2：具体描述和影响]

### 下一步计划
- [接下来要做的具体工作]

### 预计完成时间
[预计还需要X小时完成]
```

### 异常情况汇报
```markdown
🚨 遇到以下情况必须立即汇报：
- 任务无法在预估时间内完成
- 遇到技术阻塞无法解决
- 发现任务描述有歧义或错误
- 需要修改任务范围才能完成
- 发现影响其他任务的重大问题
```

## 🏁 任务完成标准

### 完成时必须检查
```markdown
□ 所有任务要求都已实现
□ 所有验收标准都已满足
□ 代码通过基本质量检查（语法、类型检查）
□ 相关文档已更新
□ 基本功能测试已通过
□ 没有引入新的明显bug
□ 任务边界没有被突破
```

### 完成后的标记流程
1. **更新任务状态**：在 `current-subtask.md` 中标记为 `completed`
2. **记录完成时间**：记录实际完成时间和用时
3. **更新完成日志**：在 `subtask-completion-log.md` 中记录详细信息
4. **汇报完成情况**：提供完成汇报
5. **等待验收**：停止工作，等待任务验收和下一个指令

## 🚨 异常处理规则

### 任务阻塞处理
```markdown
发现阻塞 → 立即汇报 → 等待指导 → 不得绕行或扩展范围
```

### 发现相关问题处理
```markdown
发现问题 → 记录到 interruption-log.md → 继续当前任务 → 汇报时提及
```

### 技术难点处理
```markdown
遇到技术难点 → 研究解决方案 → 超过30分钟未解决 → 立即汇报
```

### 范围扩展诱惑处理
```markdown
想要"顺便做点什么" → 记录想法 → 继续当前任务 → 不得实际执行
```

## 📈 质量控制

### 代码质量最低标准
```markdown
□ TypeScript编译无错误
□ ESLint检查无错误  
□ 基本的单元测试通过
□ 代码符合项目规范
□ 关键逻辑有适当注释
```

### 功能质量最低标准
```markdown
□ 核心功能按要求实现
□ 基本的手动测试通过
□ 错误情况有合理处理
□ 用户体验基本可用
```

### 文档质量标准
```markdown  
□ 重要接口有文档说明
□ 复杂逻辑有注释解释
□ 相关README已更新
□ 变更记录已记录
```

## 🎯 执行成功指标

### 效率指标
- **任务按时完成率**：≥95%
- **时间预估准确率**：±20%内
- **一次性通过率**：≥80%

### 质量指标  
- **代码质量通过率**：100%
- **功能验收通过率**：≥95%
- **返工率**：≤10%

### 规范遵循指标
- **范围控制率**：100%（无范围扩展）
- **汇报及时率**：100%
- **文档完整率**：≥90%

## 💡 执行最佳实践

### 心理准备
- 接受任务的边界限制
- 抵制"完美主义"和"代码洁癖"  
- 专注当前任务，忽略无关诱惑

### 技术实践
- 采用最简单有效的实现方案
- 优先保证功能实现，然后考虑质量
- 遇到多种实现方案时选择最直接的

### 时间管理
- 使用番茄钟等时间管理技巧
- 设置提醒避免忘记汇报
- 合理安排休息，避免疲劳影响判断