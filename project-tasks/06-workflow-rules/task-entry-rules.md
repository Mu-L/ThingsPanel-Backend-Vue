# 任务准入规则

## 🎯 标准任务流程

### 完整执行流程
```
1. 产生一个较大的任务目标
2. 拆分成若干个子任务
3. 执行任务，执行完任务后标记，移入已完成的任务才可以开始下一个子任务
4. 执行过程中如果产生新的子任务，需要确认后插入任务池
5. 直到当前子任务全部结束，才可去规划下一个大任务
```

## 📋 大任务准入规则

### 大任务创建条件
```markdown
✅ 可以创建大任务的情况：
- 当前没有未完成的大任务
- 所有子任务都已完成并移入已完成任务
- 新大任务有明确的目标和边界
- 新大任务可以拆解为具体的子任务

❌ 不能创建大任务的情况：
- 当前还有未完成的大任务
- 还有子任务在执行中或待执行
- 任务目标模糊或边界不清
- 无法拆解为具体的子任务
```

### 大任务优先级判断
- **唯一性原则**：同时只能有1个大任务
- **完成性原则**：必须等待当前大任务100%完成
- **确认机制**：新大任务必须经过确认才能进入

## 📝 子任务准入规则

### 计划内子任务
```markdown
✅ 自动准入条件：
- 属于当前大任务的拆解子任务
- 在任务拆解阶段已经规划
- 前置子任务已经完成并移入已完成任务
- 有明确的执行标准和验收条件

执行顺序：
1. 严格按照子任务的依赖关系执行
2. 前一个子任务完成 → 移入已完成 → 开始下一个子任务
```

### 临时产生的子任务
```markdown
🔄 确认准入流程：
1. 执行过程中发现需要新的子任务
2. 立即暂停当前工作
3. 汇报新子任务的必要性和内容
4. 等待确认是否插入任务池
5. 如果确认，插入到合适位置
6. 继续执行当前子任务

✅ 可能准入的情况：
- 发现当前子任务缺少必要的前置工作
- 遇到技术障碍需要额外的准备工作
- 发现影响当前任务的重大bug需要先修复
- 缺少必要的配置或环境准备

❌ 不准入的情况：
- "顺便优化"类的改进需求
- 与当前大任务无关的发现
- 可以延后处理的问题
- 超出当前大任务边界的功能
```

## ⚡ 子任务执行规则

### 执行前检查
```markdown
□ 确认当前子任务是什么
□ 确认前置子任务已完成并移入已完成任务
□ 确认当前子任务的具体要求和边界
□ 确认没有其他子任务在执行中
```

### 执行完成标记
```markdown
执行完成 → 验收检查 → 标记完成 → 移入已完成任务 → 开始下一个子任务
```

### 严格的顺序控制
```markdown
❌ 禁止行为：
- 同时执行多个子任务
- 跳过子任务执行顺序
- 子任务未完成就开始下一个
- 不经确认就添加新子任务

✅ 必须行为：
- 严格按顺序执行子任务
- 完成一个再开始下一个
- 新子任务必须确认后才插入
- 所有子任务完成才能规划新大任务
```

## 🔄 任务池管理规则

### 任务状态流转
```
待执行子任务 → 执行中 → 完成验收 → 移入已完成 → 开始下一个
```

### 任务池状态管理
```markdown
📋 pending-tasks.md
- 当前大任务的所有待执行子任务
- 按执行顺序排列
- 包含依赖关系说明

📝 in-progress-tasks.md  
- 只能有1个正在执行的子任务
- 包含详细的执行信息
- 实时更新执行状态

✅ completed-tasks/
- 所有已完成并验收的子任务
- 按完成时间归档
- 包含完整的执行记录
```

### 新子任务插入规则
```markdown
发现新子任务需求 → 汇报详细信息 → 等待确认 → 
确认通过 → 评估插入位置 → 更新任务池 → 继续当前任务

插入位置评估：
- 如果是当前任务的前置条件 → 插入到当前任务前
- 如果是后续任务的依赖 → 插入到相应位置  
- 如果是独立任务 → 插入到任务列表末尾
```

## 📊 任务完成判断标准

### 子任务完成标准
```markdown
□ 所有功能要求已实现
□ 所有验收标准已满足
□ 代码质量检查通过
□ 基本测试通过
□ 相关文档已更新
□ 没有遗留的待办事项
```

### 大任务完成标准  
```markdown
□ 所有子任务都已完成
□ 所有子任务都已移入已完成任务
□ 大任务的总体目标已达成
□ 所有验收标准都已满足
□ 没有遗留的子任务或问题
```

## 🚨 异常情况处理

### 子任务无法完成
```markdown
发现无法完成 → 立即汇报 → 分析原因 → 
可能的处理方案：
- 任务拆解：将子任务进一步拆分
- 任务调整：修改任务范围或要求
- 任务暂停：等待条件满足后继续
- 任务取消：确认不再需要执行
```

### 发现新的紧急任务
```markdown
发现紧急任务 → 评估紧急程度 → 汇报并请求指示 →
可能的处理方案：
- 立即处理：暂停当前任务，处理紧急任务
- 插入队列：确认后插入到合适位置
- 延后处理：记录到临时任务池，当前大任务完成后处理
- 不处理：确认不属于当前大任务范围
```

## 🎯 质量保证机制

### 任务边界控制
- 每个任务都有明确的边界定义
- 不允许在执行过程中随意扩展范围
- 发现边界外的工作必须通过确认流程

### 完成质量控制
- 每个子任务完成后必须进行验收
- 验收不通过不能移入已完成任务
- 不能开始下一个子任务直到当前任务验收通过

### 进度可追溯
- 所有任务状态变更都有记录
- 任务执行过程都有详细日志
- 可以随时查看任务进度和历史