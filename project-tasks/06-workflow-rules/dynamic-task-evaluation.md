# 动态任务评估机制

## 🎯 机制目的

建立每个子任务执行前的评估检查点，允许基于新发现合理调整大任务和后续子任务，将"跑偏"转化为"适应性调整"。

## 🔍 评估检查点 - 每个子任务执行前

### 1. 任务相关性评估 
**问题**: 当前任务是否与调整后的大任务目标一致？
- 🟢 **完全一致**: 继续按计划执行
- 🟡 **部分相关**: 微调任务内容，保持核心目标
- 🔴 **不相关**: 暂停，需要重新评估大任务

### 2. 成果价值评估
**问题**: 前一个任务是否产生了超预期的有价值发现？
- 🟢 **符合预期**: 继续下一个任务
- 🟡 **价值提升**: 考虑在后续任务中深化利用
- 🟠 **重大发现**: 可能需要调整后续任务优先级
- 🔴 **颠覆性洞察**: 触发大任务级别的重新评估

### 3. 路径调整评估
**问题**: 是否需要基于新发现调整后续任务？
- 🟢 **无需调整**: 按既定计划继续
- 🟡 **微调内容**: 调整1-2个后续任务的具体工作内容
- 🟠 **重新排序**: 调整后续任务的优先级和执行顺序  
- 🔴 **重新规划**: 重新拆分剩余的所有子任务

### 4. 大任务变更评估
**问题**: 是否触发了大任务级别的战略调整需求？
- 🟢 **无变更**: 大任务目标和范围保持不变
- 🟡 **范围微调**: 小幅调整大任务的具体目标
- 🟠 **策略调整**: 改变实现大任务的核心策略
- 🔴 **目标重定义**: 基于重大发现重新定义大任务

## 📋 评估执行流程

### 执行前评估 (每个子任务开始前)
```markdown
□ 阅读当前子任务描述和目标
□ 回顾上一个任务的成果和发现
□ 进行四个维度的评估 (相关性、价值、路径、大任务)
□ 记录评估结果和调整决策
□ 如需调整，更新相关文档后再开始执行
```

### 调整触发阈值
- **绿色 (0-1个🟡)**: 直接执行，无需调整
- **黄色 (2-3个🟡或1个🟠)**: 进行微调后执行
- **橙色 (2个🟠或1个🔴)**: 暂停，进行调整规划
- **红色 (多个🔴)**: 停止当前流程，重新评估大任务

## 🔧 调整操作指南

### Level 1: 微调任务内容 (🟡)
```markdown
操作范围: 调整当前任务的具体工作内容，不改变核心目标
调整文档: 更新 current-subtask.md 的工作内容描述
时间要求: 调整时间不超过15分钟
示例: 在"配置管理实现"中增加对新发现数据类型的支持
```

### Level 2: 重新排序任务 (🟠)  
```markdown
操作范围: 调整后续2-4个任务的执行顺序和内容
调整文档: 更新 active-breakdown.md 的任务顺序
时间要求: 调整时间不超过30分钟  
示例: 因为发现集成复杂度，将测试任务提前到实现任务之间
```

### Level 3: 重新规划任务 (🔴)
```markdown
操作范围: 重新拆分剩余所有子任务
调整文档: 全面更新 active-breakdown.md 和 current-main-objective.md
时间要求: 调整时间不超过60分钟
示例: 因为架构复杂度超预期，增加渐进式迁移的中间步骤
```

### Level 4: 大任务重定义 (多个🔴)
```markdown
操作范围: 重新定义大任务目标和成功标准
调整文档: 全面更新 current-main-objective.md 和 active-breakdown.md  
时间要求: 需要与用户确认，调整时间1-2小时
示例: 从"统一替换"战略转向"混合整合"战略
```

## 📝 评估记录模板

### 子任务评估记录
```markdown
## 子任务执行前评估: SUBTASK-YYYY-MM-DD-XXX

### 评估时间: YYYY-MM-DD HH:mm

### 四维评估结果:
- 任务相关性: 🟢/🟡/🔴 - [具体说明]
- 成果价值: 🟢/🟡/🟠/🔴 - [具体说明] 
- 路径调整: 🟢/🟡/🟠/🔴 - [具体说明]
- 大任务变更: 🟢/🟡/🟠/🔴 - [具体说明]

### 综合评估: 绿色/黄色/橙色/红色

### 调整决策:
- [ ] 无需调整，直接执行
- [ ] 微调任务内容: [具体调整]
- [ ] 重新排序任务: [具体调整] 
- [ ] 重新规划任务: [具体调整]
- [ ] 大任务重定义: [需要确认]

### 调整完成时间: HH:mm
```

## 🎯 成功指标

### 适应性指标
- **调整频率**: 30%的子任务进行Level 1微调 (正常)
- **调整深度**: 10%的子任务进行Level 2重排 (可接受)
- **重大调整**: 5%的情况进行Level 3重规划 (谨慎)
- **战略调整**: 1-2%的情况进行Level 4重定义 (罕见但必要)

### 价值指标  
- **成果利用率**: 90%以上的任务成果被后续任务有效利用
- **发现转化率**: 80%以上的重要发现被转化为具体的任务调整
- **目标达成率**: 95%以上的调整后任务成功达成预期目标

### 效率指标
- **调整时间**: 平均调整时间不超过预估任务时间的10%
- **决策速度**: 90%的评估决策在15分钟内完成
- **执行连贯性**: 调整后的任务执行无缝衔接，不产生等待

## 💡 最佳实践

### 评估技巧
1. **保持客观**: 基于具体成果评估，不被主观偏好影响
2. **快速决策**: 避免过度分析，15分钟内完成评估
3. **记录清晰**: 详细记录调整原因，为后续决策提供参考
4. **用户沟通**: Level 3以上调整需要及时向用户汇报

### 调整原则
1. **价值最大化**: 调整的目标是最大化整体任务价值
2. **风险最小化**: 避免过度调整带来的执行风险
3. **连贯性保持**: 确保调整后的任务逻辑连贯
4. **时间控制**: 调整时间不能超过任务执行时间

这个机制将任务跑偏转化为适应性优势，在保持执行纪律的同时允许合理的战略调整。